language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: TtoUJuQDJ0JQNJSa+iqmsmO5968sPVfDbm/fJceBgysfdfYaoPeum+DGVcY9khgSbAtxCjnkN+2Oh8BPRk1iKhiV1hjP6/jmhnGlKPA1iEBjsEq6NkTw30UYYbQ4y5J175j5Y9lWuYIBhVNOHfz8TRRMUiY/7oAULSuHhoYptYOwlKPa7ZUW6F8j+WIqPErGRjNYn5tYnqRZobnE9XBnDIikr5aFCboK29itpz1bkH7tUv3admR9BESDGJZcZbCbWEtU3jUq3lPuLbTBX0tfd8P3wF6F9KlI90UlcdZLTCJVZICKVfaM/OS1lprrmnb1rq/ay4jRqfzJ5Ha+A4zXjY/prgypkJK4woU5CCzqzvGKO7tEOFH+v5DEGOdGXpp77g/WfnB3bH0nONJCU4E84wLLi4JliFnclDuCYjUTnHknCYFLPeDJc+ERXSL9vSU93e2VeGLG+DhFV0DIZYubaVTeKUml4GC778LeCyGoKoj3aesL62mf+SUsoTIGxMg+ssrl1T/27l8T3sTYLvP9xpIOufomoLzSae7e0ukWpsatHMAJrCi4z5vN9rXlxz+1VkUQOfnHJHx5/bF0ATCb88INEyLQjh0ZxQv2tMhOpqteSr8zzLYW7qW/txpLXxBmOoJ/S4+qSG2odopDTjZHesutAjOceBLY/guc17agdyw=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
